$(document).ready(function(){$("#urlName").html(Utility.getUrlParam("urlName"));var a=Utility.getUrlParam("startDate"),b=Utility.getUrlParam("endDate");a?$("#startDate").val(a):"",b?$("#endDate").val(b):"",$("#changeDate").click(function(){Utility.blockUI($(this)),document.location.href=Utility.updateQueryString({startDate:$("#startDate").val(),endDate:$("#endDate").val()})}),$("li.open:visible .title,.sub-menu li.open:visible").click(),$(".grid .tools a.reload").live("click",function(a){var b=jQuery(this).parents(".grid"),c=$(a.target).attr("rel");"urlList"==c&&calls[c].trigger({el:b},{offset:tb_urlList.offset,count:tb_urlList.count,query:tb_urlList.getQuery()}),"heatMapData"==c?calls[c].trigger({el:$("#loadStatesData")},{callBack:"callback.plotHeatMap"}):calls[c].trigger({el:b})})}),tb_urlList={reset_pagein:function(){this.offset=0},setQuery:function(a){return this.reset_pagein(),this.query=a,this.query},getQuery:function(){return this.query||""},offset:0,count:10,total_num_page:function(){return Math.ceil(this.totalUrls/this.count)||1}},$(document).ready(function(){$("#urlList").dataTable({sDom:'<"H"<"cus_search pull-right">l>t<"F"<"cust_pagination fr">>',aoColumns:[{sTitle:"Name",sClass:"center"},{sTitle:"Average Loadtime (sec)",sClass:"center"},{sTitle:"Pageview",sClass:"center"},{sTitle:"UrlIds"}],aoColumnDefs:[{mRender:function(a,b,c,d,e){return d={urlName:a,urlId:c[3]},e=Utility.updateQueryString(d),'<a target="_blank" href="boomDashboardSummary.php'+e+'">'+a.replace(/([^\s]{100})/g,"$1\n")+"</a>"},aTargets:[0]},{bVisible:!1,aTargets:[3]}],aaSorting:[[2,"desc"]]});$("[name=urlList_length]").change(function(){tb_urlList.count=parseInt($(this).val()),tb_urlList.reset_pagein();var a={offset:tb_urlList.offset,count:tb_urlList.count,query:tb_urlList.getQuery()};calls.urlList.trigger({el:$("#urlListGrid")},a)}),$("div.cust_pagination").html('<span id="page_detail"></span><button id="page_prev" value="prev">Prev</button><button id="page_next" value="next">Next</button>'),$("#page_next").click(function(){var a=tb_urlList.total_num_page(),b=tb_urlList.offset/tb_urlList.count+1;if(a>b){tb_urlList.offset+=tb_urlList.count;var c={offset:tb_urlList.offset,count:tb_urlList.count,query:tb_urlList.getQuery()};calls.urlList.trigger({el:$("#urlListGrid")},c)}}),$("#page_prev").click(function(){var a=tb_urlList.offset/tb_urlList.count-1;if(a>-1){tb_urlList.offset-=tb_urlList.count;var b={offset:tb_urlList.offset,count:tb_urlList.count,query:tb_urlList.getQuery()};calls.urlList.trigger({el:$("#urlListGrid")},b)}}),$("div.cus_search").html('<input type="text" style="float:right" placeholder="Press enter to search" /><h6 style="margin:0" >Enter more than 3 Characters</h6>'),$("div.cus_search input").keypress(function(a){if(13==a.which){var b=tb_urlList.setQuery($(this).val()),c={offset:tb_urlList.offset,count:tb_urlList.count,query:b};calls.urlList.trigger({el:$("#urlListGrid")},c)}}),calls.init({name:"urlList",url:serviceBaseUrl+"/boomGetUrls.php",responseVarName:"urlList",callback:callback.fillUrlTable}).trigger({el:$("#urlListGrid")},{offset:tb_urlList.offset,count:tb_urlList.count,query:tb_urlList.getQuery()})}),callback=function(){var a=function(a){tb_urlList.totalUrls=a.totalUrls;var b=$("#urlList").dataTable();b.fnClearTable();var c=a.urls,d=null;for(key in c)if(c.hasOwnProperty(key)){var e=c[key];d=Utility.milliToSec(e.loadTime),b.fnAddData([e.url,d,e.pageViews,e.urlId])}$("#page_detail").html("Showing "+(tb_urlList.offset/tb_urlList.count+1)+" of "+tb_urlList.total_num_page()+" pages ")};return{fillUrlTable:a}}();