HEATMAP={coord:{},ref_pos:{},set_ref_pos:function(){var c={width:"1000px",left:"50%",marginLeft:"-500px",top:"0",position:"absolute",height:"10px",border:"solid"};var b=document.createElement("div");for(key in c){b.style[key]=c[key]}document.body.appendChild(b);var a=b.getBoundingClientRect();this.ref_pos={left:a.left,top:0};b.parentNode.removeChild(b);return this.ref_pos},set_coord:function(a,d){var b=a+""+d;var c=this.coord;if(b in c){c[b].count++}else{c[b]={x:a,y:d,count:1}}},get_coord:function(){var a=[];for(key in this.coord){a[a.length]=this.coord[key]}this.coord={};return a},transform_coord:function(a,b){return(b*Math.floor(a/b)+b/2)},get_mouse_coord:function(d,b,e,c){if(d==null&&e!=null){var f=document.documentElement,a=document.body;d=e+(f&&f.scrollLeft||a&&a.scrollLeft||0);b=c+(f&&f.scrollTop||a&&a.scrollTop||0)}if(d!=null&&d>=this.ref_pos.left&&b>=this.ref_pos.top){d=this.transform_coord(d,5);b=this.transform_coord(b,5);d-=this.ref_pos.left;b-=this.ref_pos.top;return{x:d,y:b}}return false},Events:{on:function(a){if(window.addEventListener){a.elem.addEventListener(a.name,function(b){a.func.call(this,b)})}else{a.elem.attachEvent("on"+a.name,function(){a.func.call(this,window.event)})}},init:function(){this.on({elem:document.documentElement,name:"mousedown",func:function(a){var b=HEATMAP.get_mouse_coord(a.pageX,a.pageY,a.clientX,a.clientY);b?HEATMAP.set_coord(b.x,b.y):""}})}},init:function(){if(!HEATMAP.ready){this.set_ref_pos();this.Events.init();HEATMAP.ready=true}}};